# 需求文档

## 介绍

基于当前 UniApp + CloudBase 模板开发一个匿名聊天社交应用 SoulChat，提供手机号验证码登录、随机匹配聊天、实时对话等核心功能。应用追求简洁清晰的用户体验，支持多端运行。

## 需求

### 需求 1 - 用户登录验证

**用户故事：** 作为用户，我希望能够通过手机号验证码快速登录应用，以便开始使用聊天功能。

#### 验收标准

1. When 用户输入有效手机号时，系统应当发送验证码并显示倒计时。
2. When 用户输入正确验证码时，系统应当完成登录并跳转到主界面。
3. When 用户输入错误验证码时，系统应当显示错误提示信息。
4. When 验证码发送失败时，系统应当显示相应错误信息并允许重试。

### 需求 2 - 随机匹配聊天

**用户故事：** 作为已登录用户，我希望能够点击按钮随机匹配其他在线用户，以便开始匿名聊天。

#### 验收标准

1. When 用户点击匹配按钮时，系统应当显示匹配中状态并开始寻找在线用户。
2. When 找到匹配用户时，系统应当创建聊天房间并跳转到聊天界面。
3. When 超过30秒未找到匹配用户时，系统应当显示匹配失败提示。
4. When 用户在匹配过程中取消时，系统应当停止匹配并返回主界面。

### 需求 3 - 实时聊天对话

**用户故事：** 作为匹配成功的用户，我希望能够与对方进行实时文字聊天，双方消息能够即时收发。

#### 验收标准

1. When 用户发送消息时，系统应当立即显示在聊天界面并发送给对方。
2. When 接收到对方消息时，系统应当立即显示在聊天界面。
3. When 消息发送失败时，系统应当显示发送失败状态并支持重发。
4. When 聊天界面打开时，系统应当自动滚动到最新消息位置。

### 需求 4 - 聊天房间管理

**用户故事：** 作为聊天中的用户，我希望能够主动退出聊天房间，当任意一方退出时聊天结束。

#### 验收标准

1. When 用户点击退出按钮时，系统应当显示确认对话框。
2. When 用户确认退出时，系统应当关闭聊天房间并返回主界面。
3. When 对方退出聊天时，系统应当显示对方已离开提示并自动返回主界面。
4. When 聊天房间关闭时，系统应当清理相关数据和监听器。

### 需求 5 - 界面简洁清晰

**用户故事：** 作为用户，我希望应用界面简洁清晰，操作流畅，能够快速上手使用。

#### 验收标准

1. When 用户首次打开应用时，系统应当提供清晰的操作指引。
2. When 用户在各个界面间切换时，系统应当提供流畅的转场效果。
3. When 显示加载状态时，系统应当提供明确的加载提示。
4. When 发生错误时，系统应当提供用户友好的错误提示信息。 